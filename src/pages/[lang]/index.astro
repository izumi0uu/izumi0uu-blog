---
import Base from "@/layouts/Base.astro";
import ThemeShowcase from "@/components/demo/ThemeShowcase.astro";
import { getPageMetadata } from "@/utils/content/metadata";

// 导出 getStaticPaths 函数用于生成静态路由
export async function getStaticPaths() {
  // 支持的语言列表
  const supportedLocales = ["en", "zh"];
  
  return supportedLocales.map((lang) => ({
    params: { lang },
  }));
}

// 从路由参数中获取当前语言
const { lang } = Astro.params;

// 获取页面metadata（使用空字符串作为首页的key）
const metadata = getPageMetadata("");
---

<Base {metadata}>
  <main class="container mx-auto px-4 py-8">
    <section class="mb-12">
      <h1 class="text-4xl font-bold text-on-surface mb-4">
        {lang === "zh" ? "🎨 Tailwind CSS v4 主题演示" : "🎨 Tailwind CSS v4 Theme Showcase"}
      </h1>
      <p class="text-lg text-on-surface-variant mb-8">
        {lang === "zh" 
          ? "欢迎体验完全重构的 Tailwind v4 主题系统。这个页面展示了新的颜色系统、自定义工具类和主题切换功能。"
          : "Welcome to the completely refactored Tailwind v4 theme system. This page showcases the new color system, custom utility classes, and theme switching functionality."
        }
      </p>
      
      <!-- 新的v4主题演示组件 -->
      <ThemeShowcase />
    </section>

    <section class="mt-16 p-6 surface-container">
      <h2 class="text-2xl font-semibold text-on-surface mb-4">
        {lang === "zh" ? "🚀 迁移完成" : "🚀 Migration Complete"}
      </h2>
      <div class="space-y-3 text-on-surface-variant">
        {lang === "zh" ? (
          <>
            <p>✅ <strong>theme() 函数错误</strong>: 已替换为原生CSS变量</p>
            <p>✅ <strong>ESBuild 语法错误</strong>: 已修复注释格式问题</p>
            <p>✅ <strong>TypeScript 类型错误</strong>: 已添加正确的类型注解</p>
            <p>✅ <strong>OKLCH 颜色空间</strong>: 现代颜色系统已启用</p>
            <p>✅ <strong>自定义工具类</strong>: 利用v4的@utility指令</p>
            <p>✅ <strong>主题切换</strong>: 支持4种主题模式</p>
          </>
        ) : (
          <>
            <p>✅ <strong>theme() function errors</strong>: Replaced with native CSS variables</p>
            <p>✅ <strong>ESBuild syntax errors</strong>: Fixed comment formatting issues</p>
            <p>✅ <strong>TypeScript type errors</strong>: Added proper type annotations</p>
            <p>✅ <strong>OKLCH color space</strong>: Modern color system enabled</p>
            <p>✅ <strong>Custom utility classes</strong>: Leveraging v4's @utility directive</p>
            <p>✅ <strong>Theme switching</strong>: Supports 4 theme modes</p>
          </>
        )}
      </div>
    </section>
  </main>
</Base>
